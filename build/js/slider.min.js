const reviewsContainer=document.querySelector(".reviews__reviews-list"),trainersContainer=document.querySelector(".trainers__trainers-list"),page=document.querySelector(".page"),reviewsPrevButton=document.querySelector(".reviews__button--prev"),reviewsNextButton=document.querySelector(".reviews__button--next"),trainersPrevButton=document.querySelector(".trainers__button--prev"),trainersNextButton=document.querySelector(".trainers__button--next");let reviewsTouchStartX,trainersTouchStartX,trainerTarget,slidersInitDebouncer;const getCurrentReviews=()=>[...reviewsContainer.querySelectorAll(".reviews__review")],getCurrentReview=()=>getCurrentReviews()[1],getCurrentTrainers=()=>[...trainersContainer.querySelectorAll(".trainers__trainer")],isSwipe=(e,t)=>Math.abs(e-t)>5;let leftSlideBlock=!0,rightSlideBlock=!1;const createDebouncer=(e,t)=>{let r;return(...i)=>{clearTimeout(r),r=setTimeout((()=>e.apply(i)),t)}},checkReviewsButtons=()=>{const e=getCurrentReviews()[1],t="first"===e.id,r="last"===e.id;reviewsPrevButton.disabled=!!t,leftSlideBlock=!!t,reviewsNextButton.disabled=!!r,rightSlideBlock=!!r},initElements=(e,t,r)=>{const i=t();r(i);const n=i[i.length-1],s=n.cloneNode(!0);n.remove(),e.insertBefore(s,i[0])};initElements(trainersContainer,getCurrentTrainers,(e=>{})),initElements(reviewsContainer,getCurrentReviews,(e=>{e[0].id="first",e[e.length-1].id="last"}));const initScroll=(e,t,r)=>{const i=t(),n=i[0],s=i[1];r(e,n,s,s.offsetLeft-n.offsetWidth)},initTrainersPosition=()=>{initScroll(trainersContainer,getCurrentTrainers,((e,t,r,i)=>{const n=r.offsetWidth+i;e.scroll(n,0)}))},initReviewsPosition=()=>{initScroll(reviewsContainer,getCurrentReviews,((e,t,r,i)=>{const n=(e.offsetWidth-t.offsetWidth)/2,s=r.offsetWidth+(i-n);e.scroll(s,0)}))};initReviewsPosition(),initTrainersPosition(),slidersInitDebouncer=createDebouncer((()=>{initReviewsPosition(),initTrainersPosition()}),50),window.addEventListener("resize",(()=>{slidersInitDebouncer()}));const slideLeft=(e,t)=>{const r=e(),i=r[r.length-1],n=i.cloneNode(!0);trainerTarget=n;const s=r[0];i.remove(),t.insertBefore(n,s),t.classList.add("slider--to-left"),window.requestAnimationFrame((()=>{t.classList.remove("slider--to-left")}))},slideRight=(e,t)=>{const r=e(),i=r[0].cloneNode(!0);trainerTarget=i,r[0].remove(),t.append(i),t.classList.add("slider--to-right"),window.requestAnimationFrame((()=>{t.classList.remove("slider--to-right")}))},handleTouchSwipe=(e,t,r,i,n)=>{if(e>t){if(n&&rightSlideBlock)return;slideRight(r,i)}if(e<t){if(n&&leftSlideBlock)return;slideLeft(r,i)}};reviewsPrevButton.addEventListener("click",(()=>{slideLeft(getCurrentReviews,reviewsContainer),checkReviewsButtons()})),reviewsNextButton.addEventListener("click",(()=>{slideRight(getCurrentReviews,reviewsContainer),checkReviewsButtons()})),reviewsContainer.addEventListener("touchstart",(e=>{reviewsTouchStartX=e.changedTouches[0].screenX,page.classList.add("page--without-scroll")})),reviewsContainer.addEventListener("touchend",(e=>{const t=e.changedTouches[0].screenX;isSwipe(reviewsTouchStartX,t)&&(handleTouchSwipe(reviewsTouchStartX,t,getCurrentReviews,reviewsContainer,!0),checkReviewsButtons()),page.classList.remove("page--without-scroll")})),trainersPrevButton.addEventListener("click",(()=>{slideLeft(getCurrentTrainers,trainersContainer)})),trainersNextButton.addEventListener("click",(()=>{slideRight(getCurrentTrainers,trainersContainer)})),trainersContainer.addEventListener("touchstart",(e=>{page.classList.add("page--without-scroll");const t=e.target.closest(".trainers__trainer");t&&(trainerTarget=t,trainersTouchStartX=e.changedTouches[0].screenX)})),trainersContainer.addEventListener("touchend",(e=>{const t=e.changedTouches[0].screenX;if(isSwipe(trainersTouchStartX,t))return handleTouchSwipe(trainersTouchStartX,t,getCurrentTrainers,trainersContainer,!1),trainerTarget.focus(),trainerTarget.blur(),void page.classList.remove("page--without-scroll");trainerTarget.focus(),page.classList.remove("page--without-scroll")}));